(this["webpackJsonpvideofbweb-clients"]=this["webpackJsonpvideofbweb-clients"]||[]).push([[0],{114:function(e,a,t){},155:function(e,a,t){e.exports=t(197)},188:function(e,a,t){},189:function(e,a,t){},190:function(e,a,t){},192:function(e,a,t){},197:function(e,a,t){"use strict";t.r(a);var n,r=t(0),o=t.n(r),i=t(10),s=t.n(i),l=t(17),c=t(14),m=t(20),d=t(22),u=t(21),p=t(3),g=t(53),h=t(7),v=t(45),b=t(131),C=Object(v.b)("apiCall"),f=(Object(v.b)("apiSyncCall"),Object(v.b)("apiCallFailure"),{user:"user",video:"video",campaign:"campaign",passwordReset:"passwordReset",login:"login",register:"register"}),y=["user"],E="All",N="Active",k="Inactive",O="New",P="All",w="Active",j="Past",R="New",_="videostuff",M=function(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)},S={loading:!1,loggedIn:!1,activeModule:null,userFilter:E,campaignFilter:P,userData:{name:null,email:null,admin:!1,key:null,bucketFolder:null}},U=new b.a,L=Object(v.c)({name:"session",initialState:S,reducers:{onPageLoad:function(e,a){var t;if(!a.payload.success)return U.set("activeModule",f.login),t=f.login,Object(h.a)(Object(h.a)({},e),{},{loading:!1,loggedIn:!1,activeModule:t,userData:{}});(t=U.get("activeModule"))||(U.set("activeModule",f.video),t=f.video);var n=a.payload,r=n.name,o=n.email,i=n.admin,s=n.key,l=n.bucketFolder;return t!==f.user||i||(t=f.video,U.set("activeModule",f.video)),t===f.campaign&&i&&(t=f.video,U.set("activeModule",f.video)),Object(h.a)(Object(h.a)({},e),{},{loading:!1,loggedIn:!0,activeModule:t,userData:{name:r,email:o,admin:i,key:s,bucketFolder:l}})},onLogin:function(e,a){if(!a.payload.success)return Object(h.a)(Object(h.a)({},e),{},{loading:!1,loggedIn:!1,userData:{}});var t=a.payload,n=t.name,r=t.email,o=t.admin,i=t.key,s=t.bucketFolder,l=o?f.user:f.campaign;return U.set("activeModule",l),Object(h.a)(Object(h.a)({},e),{},{loading:!1,loggedIn:!0,activeModule:l,userData:{name:n,email:r,admin:o,key:i,bucketFolder:s}})},onLogout:function(e,a){return a.payload.success?(U.set("activeModule",f.login),{loading:!1,loggedIn:!1,activeModule:f.login,userFilter:E,campaignFilter:P,userData:{name:null,email:null,admin:!1,key:null,bucketFolder:null}}):e},onNevigate:function(e,a){if(!(a.payload.to in f))return e;if(e.admin&&!function(e){return y.includes(e)}(a.payload.to))return e;var t=a.payload.to;return U.set("activeModule",t),Object(h.a)(Object(h.a)({},e),{},{activeModule:t})},onFetchUsers:function(e,a){return a.payload.success?Object(h.a)(Object(h.a)({},e),{},{userPoolData:a.payload.users}):e},onUserFilter:function(e,a){return Object(h.a)(Object(h.a)({},e),{},{userFilter:a.payload.filter})},onVideoFilter:function(e,a){return Object(h.a)(Object(h.a)({},e),{},{albumUrl:a.payload.filter,albumName:a.payload.name})},onCampaignFilter:function(e,a){return Object(h.a)(Object(h.a)({},e),{},{campaignFilter:a.payload.filter})},onFetchCampaigns:function(e,a){if(!a.payload.success)return e;var t=e.userData.admin?a.payload.campaigns.map((function(e){return{name:e.user,campaigns:e.campaigns.map((function(e){return{campaignName:e.name,campaignUrl:e.campaignURL}}))}})):a.payload.campaigns;return Object(h.a)(Object(h.a)({},e),{},{campaignList:t})},onFetchVideoList:function(e,a){return a.payload.success?Object(h.a)(Object(h.a)({},e),{},{loading:!1,albumList:a.payload.videos}):Object(h.a)(Object(h.a)({},e),{},{loading:!1,albumList:void 0})},onRemoveVideo:function(e,a){return a.payload.success?Object(h.a)(Object(h.a)({},e),{},{loading:!1,albumList:e.albumList.filter((function(e){return e.key!==a.payload.videoKey}))}):Object(h.a)(Object(h.a)({},e),{},{loading:!1})},onSelectAlbum:function(e,a){return Object(h.a)(Object(h.a)({},e),{},{albumName:a.payload.albumName})},onFetchVideoUrl:function(e,a){return a.payload.success?Object(h.a)(Object(h.a)({},e),{},{loading:!1,videoUrl:a.payload.videoUrl}):Object(h.a)(Object(h.a)({},e),{},{loading:!1})},onClearVideoUrl:function(e,a){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})},onWaitAction:function(e,a){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})}}}),x=L.actions,F=x.onPageLoad,I=x.onLogin,A=x.onLogout,B=x.onFetchUsers,D=x.onNevigate,T=(x.onExistingUserCheck,L.actions),q=T.onFetchCampaigns,V=T.onFetchVideoList,G=(T.onFetchVideoUrl,T.onRemoveVideo),z=T.onClearVideoUrl,H=T.onSelectAlbum,K=L.actions,J=K.onCampaignFilter,W=(K.onVideoFilter,K.onUserFilter),Z=L.actions.onWaitAction,Y=L.reducer,Q=(n="dev"===window.env?window.devURL:window.prodURL)+"/users",X=Q+"/login",$=Q+"/otp",ee=Q+"/passwordReset",ae=Q+"/register",te=n+"/campaigns",ne=Q+"/getSessionUser",re=Q+"/logout",oe=Q+"/getAllUsers",ie=Q+"/updateUser",se=Q+"/removeUser",le=Q+"/addUser",ce=Q+"/userExists",me={"Content-Type":void 0},de={"Content-Type":"application/json"},ue="GET",pe="PUT",ge="POST",he="DELETE",ve=function(e,a){return C({url:ce+"/"+e,callParams:{method:ue,headers:de,credentials:"include"},cb:a})},be=function(e){return D({to:e})},Ce=function(e){return W({filter:e})},fe=function(e){return J({filter:e})},ye=function(e){return C({url:te+"/getUserCampaigns/"+e,callParams:{method:ue,headers:de,credentials:"include"},onSuccess:q.type,onFailure:q.type})},Ee=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={collapseID:""},e.toggleCollapse=function(a){return function(){return e.setState((function(e){return{collapseID:e.collapseID!==a?a:""}}))}},e}return Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(g.a,null,o.a.createElement(p.e,null,o.a.createElement(p.k,{color:"blue",dark:!0,expand:"md",scrolling:!0,fixed:"top"},o.a.createElement(p.l,null,o.a.createElement("strong",{className:"white-text"},"Patronish")),o.a.createElement(p.n,{onClick:this.toggleCollapse("navbarCollapse")}),o.a.createElement(p.d,{id:"navbarCollapse",isOpen:this.state.collapseID,navbar:!0},o.a.createElement(p.m,{left:!0},o.a.createElement(p.j,{active:this.props.activeModule===f.user,style:{display:this.props.admin?"":"none"}},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.navigate(f.user)},link:!0},"Users")),o.a.createElement(p.j,{active:this.props.activeModule===f.video},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.navigate(f.video)},link:!0},"Videos")),o.a.createElement(p.j,{active:this.props.activeModule===f.campaign,style:{display:this.props.admin?"none":""}},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.navigate(f.campaign)},link:!0},"Campaign"))),o.a.createElement(p.m,{right:!0},o.a.createElement(p.j,null,o.a.createElement(p.i,{to:"",onClick:this.props.logout,link:!0},"Logout")),o.a.createElement(p.j,null,o.a.createElement(p.i,{to:"",active:!1,onClick:function(){console.log("nav link click event")},link:!0},o.a.createElement(p.f,{far:!0,icon:"user"}),this.props.username)))))))}}]),t}(r.Component),Ne=Object(u.b)((function(e){return{username:e.userData.name,admin:e.userData.admin,activeModule:e.activeModule}}),(function(e){return{logout:function(){return e(C({url:re,callParams:{method:ge,headers:de,credentials:"include"},onSuccess:A.type,onFailure:A.type}))},navigate:function(a){return e(be(a))}}}))(Ee),ke=t(29),Oe=(t(186),function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.campaignList||(this.props.isAdmin?this.props.fetchCampaigns("*"):this.props.fetchCampaigns(this.props.userEmail))}},{key:"generateUserVideoMenu",value:function(){var e=this,a=this.props.campaignList?this.props.campaignList.map((function(a){return o.a.createElement(p.i,{to:"",onClick:function(){e.props.overlay(),e.props.setAlbumName(a.name),e.props.filterVideos(a.campaignURL)},link:!0},a.name)})):[];return o.a.createElement(ke.a,null,o.a.createElement(ke.d,{title:"Video Folders"},o.a.createElement(p.j,{active:this.props.videoMenu===_},a)))}},{key:"generateAdminVideoMenu",value:function(){var e=this,a=this.props.campaignList?this.props.campaignList.map((function(a){var t=a.campaigns.map((function(a){return o.a.createElement(p.i,{to:"",onClick:function(){e.props.overlay(),e.props.setAlbumName(a.campaignName),e.props.filterVideos(a.campaignUrl)},link:!0},a.campaignName)}));return o.a.createElement(ke.d,{title:a.name},o.a.createElement(p.j,{active:e.props.videoMenu===_},t))})):[];return o.a.createElement(ke.a,null,a)}},{key:"render",value:function(){var e=this,a=o.a.createElement(ke.a,null,o.a.createElement(ke.d,{defaultOpen:!0,title:"Filter Users"},o.a.createElement(p.j,{active:this.props.userMenu===E},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterUsers(E)},link:!0},"All Users")),o.a.createElement(p.j,{active:this.props.userMenu===N},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterUsers(N)},link:!0},"Active Users")),o.a.createElement(p.j,{active:this.props.userMenu===k},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterUsers(k)},link:!0},"Inactive Users"))),o.a.createElement(p.j,{active:this.props.userMenu===O},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterUsers(O)},link:!0},"Add New User"))),t=this.props.isAdmin?this.generateAdminVideoMenu():this.generateUserVideoMenu(),n=o.a.createElement(ke.a,null,o.a.createElement(ke.d,{defaultOpen:!0,title:"Filter Campaigns"},o.a.createElement(p.j,{active:this.props.campaignMenu===P},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterCampaigns(P)},link:!0},"All Campaigns")),o.a.createElement(p.j,{active:this.props.campaignMenu===w},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterCampaigns(w)},link:!0},"Active Campaigns")),o.a.createElement(p.j,{active:this.props.campaignMenu===j},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterCampaigns(j)},link:!0},"Past Campaigns"))),o.a.createElement(p.j,{active:this.props.campaignMenu===R},o.a.createElement(p.i,{to:"",onClick:function(){return e.props.filterCampaigns(R)},link:!0},"Add New Campaign")));return o.a.createElement("div",{className:"",style:{position:"fixed",bottom:0,left:0,top:0}},o.a.createElement(g.a,null,o.a.createElement(ke.c,{width:270},o.a.createElement(ke.a,null,o.a.createElement(ke.b,null),o.a.createElement(ke.b,null),o.a.createElement(ke.b,null)),this.props.activeModule===f.user?a:o.a.createElement(o.a.Fragment,null),this.props.activeModule===f.video?t:o.a.createElement(o.a.Fragment,null),this.props.activeModule===f.campaign?n:o.a.createElement(o.a.Fragment,null))))}}]),t}(r.Component)),Pe=Object(u.b)((function(e){return{activeModule:e.activeModule,userMenu:e.userFilter,campaignList:e.campaignList,campaignMenu:e.campaignFilter,userEmail:e.userData.email,isAdmin:e.userData.admin}}),(function(e){return{fetchCampaigns:function(a){return e(ye(a))},filterUsers:function(a){return e(Ce(a))},filterVideos:function(a){return e(C({url:te+"/getCampaignVideosList/"+a,callParams:{method:ue,headers:de,credentials:"include"},onSuccess:V.type,onFailure:V.type}))},filterCampaigns:function(a){return e(fe(a))},setAlbumName:function(a){return e(function(e){return H({albumName:e})}(a))},overlay:function(){return e(Z())}}}))(Oe),we=t(9),je=t(11),Re=t(133),_e=t(85),Me=t(5),Se=t(92),Ue=t(93);function Le(){var e=Object(Se.a)(["\n  list-style: none;\n  display: block;\n  padding: 4px 8px 4px 16px;\n  overflow: hidden;\n  color: inherit;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 14px;\n  line-height: 1.5;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #359ed0;\n    color: white;\n  }\n"]);return Le=function(){return e},e}function xe(){var e=Object(Se.a)(["\n  transition: color 0.15s, background-color 0.15s, width 0.25s ease-in-out;\n  position: absolute;\n  width: 160px;\n  padding: 4px 0px;\n  list-style: none;\n  background-clip: padding-box;\n  border-radius: 4px;\n  box-shadow: 0 1px 15px rgba(27, 31, 35, 0.15);\n  margin: 0;\n  background-color: white;\n  color: #333;\n  border: 1px solid rgba(27, 31, 35, 0.15);\n"]);return xe=function(){return e},e}function Fe(e){var a="-50%",t=0;"left"===e?(a="-3.5px",t="-50%"):"right"===e&&(a="3.5px",t="-50%");return"translate(".concat(a,", ").concat(t,") rotate(").concat({top:180,right:-90,left:90,bottom:0}[e],"deg)")}var Ie={top:{x:0,y:-20},left:{x:-20,y:0},bottom:{x:0,y:20},right:{x:20,y:0}},Ae=Object(Ue.a)(_e.b.ul)(xe()),Be=function(e){return o.a.createElement("svg",Object.assign({width:14,height:7},e),o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#CDCFD0",d:"M7 .07v1.428l-5.55 5.5L0 6.982zM7 .07v1.428l5.55 5.5L14 6.982z"}),o.a.createElement("path",{fill:"#FFF",d:"M1.45 7L7 1.498 12.55 7z"})))},De=o.a.forwardRef((function(e,a){var t=e.className,n=e.style,r=e.arrowStyle,i=e.layerSide,s=e.children;return o.a.createElement(Ae,{ref:a,className:t,style:n,initial:Object(h.a)({opacity:0,scale:.85},Ie[i]),animate:{opacity:1,scale:1,x:0,y:0},exit:Object(h.a)({opacity:0,scale:.85},Ie[i]),transition:{type:"spring",stiffness:800,damping:35}},s,o.a.createElement(Be,{style:Object(h.a)(Object(h.a)({},r),{},{position:"absolute",transformOrigin:"center",transform:Fe(i)})}))})),Te=Ue.a.li(Le());function qe(e){var a=e.className,t=e.style,n=e.children,r=Object(Me.a)(e,["className","style","children"]);return o.a.createElement(Te,Object.assign({className:a,style:t},r),n)}var Ve=De;function Ge(e){return o.a.createElement(Re.a,{closeOnOutsideClick:!0,renderLayer:function(a){var t=e.options.map((function(t){return o.a.createElement(qe,{onClick:function(){e.callback(t.action,e.id),a.close()},key:t.action},t.name())}));return o.a.createElement(_e.a,null,a.isOpen?o.a.createElement(Ve,{ref:a.layerProps.ref,style:a.layerProps.style,arrowStyle:a.arrowStyle,layerSide:a.layerSide},t):null)},placement:{anchor:"LEFT_TOP",autoAdjust:!0,snapToAnchor:!1,triggerOffset:12,scrollOffset:16,preferX:"RIGHT"}},e.trigger)}var ze=t(252),He=t(234),Ke=[{Code:"AF",Name:"Afghanistan"},{Code:"AL",Name:"Albania"},{Code:"DZ",Name:"Algeria"},{Code:"AS",Name:"American Samoa"},{Code:"AD",Name:"Andorra"},{Code:"AO",Name:"Angola"},{Code:"AI",Name:"Anguilla"},{Code:"AQ",Name:"Antarctica"},{Code:"AG",Name:"Antigua and Barbuda"},{Code:"AR",Name:"Argentina"},{Code:"AM",Name:"Armenia"},{Code:"AW",Name:"Aruba"},{Code:"AU",Name:"Australia"},{Code:"AT",Name:"Austria"},{Code:"AZ",Name:"Azerbaijan"},{Code:"BS",Name:"Bahamas"},{Code:"BH",Name:"Bahrain"},{Code:"BD",Name:"Bangladesh"},{Code:"BB",Name:"Barbados"},{Code:"BY",Name:"Belarus"},{Code:"BE",Name:"Belgium"},{Code:"BZ",Name:"Belize"},{Code:"BJ",Name:"Benin"},{Code:"BM",Name:"Bermuda"},{Code:"BT",Name:"Bhutan"},{Code:"BO",Name:"Bolivia, Plurinational State of"},{Code:"BQ",Name:"Bonaire, Sint Eustatius and Saba"},{Code:"BA",Name:"Bosnia and Herzegovina"},{Code:"BW",Name:"Botswana"},{Code:"BV",Name:"Bouvet Island"},{Code:"BR",Name:"Brazil"},{Code:"IO",Name:"British Indian Ocean Territory"},{Code:"BN",Name:"Brunei Darussalam"},{Code:"BG",Name:"Bulgaria"},{Code:"BF",Name:"Burkina Faso"},{Code:"BI",Name:"Burundi"},{Code:"KH",Name:"Cambodia"},{Code:"CM",Name:"Cameroon"},{Code:"CA",Name:"Canada"},{Code:"CV",Name:"Cape Verde"},{Code:"KY",Name:"Cayman Islands"},{Code:"CF",Name:"Central African Republic"},{Code:"TD",Name:"Chad"},{Code:"CL",Name:"Chile"},{Code:"CN",Name:"China"},{Code:"CX",Name:"Christmas Island"},{Code:"CC",Name:"Cocos (Keeling) Islands"},{Code:"CO",Name:"Colombia"},{Code:"KM",Name:"Comoros"},{Code:"CG",Name:"Congo"},{Code:"CD",Name:"Congo, the Democratic Republic of the"},{Code:"CK",Name:"Cook Islands"},{Code:"CR",Name:"Costa Rica"},{Code:"HR",Name:"Croatia"},{Code:"CU",Name:"Cuba"},{Code:"CY",Name:"Cyprus"},{Code:"CZ",Name:"Czech Republic"},{Code:"DK",Name:"Denmark"},{Code:"DJ",Name:"Djibouti"},{Code:"DM",Name:"Dominica"},{Code:"DO",Name:"Dominican Republic"},{Code:"EC",Name:"Ecuador"},{Code:"EG",Name:"Egypt"},{Code:"SV",Name:"El Salvador"},{Code:"GQ",Name:"Equatorial Guinea"},{Code:"ER",Name:"Eritrea"},{Code:"EE",Name:"Estonia"},{Code:"ET",Name:"Ethiopia"},{Code:"FK",Name:"Falkland Islands (Malvinas)"},{Code:"FO",Name:"Faroe Islands"},{Code:"FJ",Name:"Fiji"},{Code:"FI",Name:"Finland"},{Code:"FR",Name:"France"},{Code:"GF",Name:"French Guiana"},{Code:"PF",Name:"French Polynesia"},{Code:"TF",Name:"French Southern Territories"},{Code:"GA",Name:"Gabon"},{Code:"GM",Name:"Gambia"},{Code:"GE",Name:"Georgia"},{Code:"DE",Name:"Germany"},{Code:"GH",Name:"Ghana"},{Code:"GI",Name:"Gibraltar"},{Code:"GR",Name:"Greece"},{Code:"GL",Name:"Greenland"},{Code:"GD",Name:"Grenada"},{Code:"GP",Name:"Guadeloupe"},{Code:"GU",Name:"Guam"},{Code:"GT",Name:"Guatemala"},{Code:"GG",Name:"Guernsey"},{Code:"GN",Name:"Guinea"},{Code:"GW",Name:"Guinea-Bissau"},{Code:"GY",Name:"Guyana"},{Code:"HT",Name:"Haiti"},{Code:"HM",Name:"Heard Island and McDonald Islands"},{Code:"VA",Name:"Holy See (Vatican City State)"},{Code:"HN",Name:"Honduras"},{Code:"HK",Name:"Hong Kong"},{Code:"HU",Name:"Hungary"},{Code:"IS",Name:"Iceland"},{Code:"IN",Name:"India"},{Code:"ID",Name:"Indonesia"},{Code:"IR",Name:"Iran, Islamic Republic of"},{Code:"IQ",Name:"Iraq"},{Code:"IE",Name:"Ireland"},{Code:"IM",Name:"Isle of Man"},{Code:"IL",Name:"Israel"},{Code:"IT",Name:"Italy"},{Code:"JM",Name:"Jamaica"},{Code:"JP",Name:"Japan"},{Code:"JE",Name:"Jersey"},{Code:"JO",Name:"Jordan"},{Code:"KZ",Name:"Kazakhstan"},{Code:"KE",Name:"Kenya"},{Code:"KI",Name:"Kiribati"},{Code:"KP",Name:"Korea, Democratic People's Republic of"},{Code:"KR",Name:"Korea, Republic of"},{Code:"KW",Name:"Kuwait"},{Code:"KG",Name:"Kyrgyzstan"},{Code:"LA",Name:"Lao People's Democratic Republic"},{Code:"LV",Name:"Latvia"},{Code:"LB",Name:"Lebanon"},{Code:"LS",Name:"Lesotho"},{Code:"LR",Name:"Liberia"},{Code:"LY",Name:"Libya"},{Code:"LI",Name:"Liechtenstein"},{Code:"LT",Name:"Lithuania"},{Code:"LU",Name:"Luxembourg"},{Code:"MO",Name:"Macao"},{Code:"MK",Name:"Macedonia, the Former Yugoslav Republic of"},{Code:"MG",Name:"Madagascar"},{Code:"MW",Name:"Malawi"},{Code:"MY",Name:"Malaysia"},{Code:"MV",Name:"Maldives"},{Code:"ML",Name:"Mali"},{Code:"MT",Name:"Malta"},{Code:"MH",Name:"Marshall Islands"},{Code:"MQ",Name:"Martinique"},{Code:"MR",Name:"Mauritania"},{Code:"MU",Name:"Mauritius"},{Code:"YT",Name:"Mayotte"},{Code:"MX",Name:"Mexico"},{Code:"FM",Name:"Micronesia, Federated States of"},{Code:"MD",Name:"Moldova, Republic of"},{Code:"MC",Name:"Monaco"},{Code:"MN",Name:"Mongolia"},{Code:"ME",Name:"Montenegro"},{Code:"MS",Name:"Montserrat"},{Code:"MA",Name:"Morocco"},{Code:"MZ",Name:"Mozambique"},{Code:"MM",Name:"Myanmar"},{Code:"NA",Name:"Namibia"},{Code:"NR",Name:"Nauru"},{Code:"NP",Name:"Nepal"},{Code:"NL",Name:"Netherlands"},{Code:"NC",Name:"New Caledonia"},{Code:"NZ",Name:"New Zealand"},{Code:"NI",Name:"Nicaragua"},{Code:"NE",Name:"Niger"},{Code:"NG",Name:"Nigeria"},{Code:"NU",Name:"Niue"},{Code:"NF",Name:"Norfolk Island"},{Code:"MP",Name:"Northern Mariana Islands"},{Code:"NO",Name:"Norway"},{Code:"OM",Name:"Oman"},{Code:"PK",Name:"Pakistan"},{Code:"PW",Name:"Palau"},{Code:"PS",Name:"Palestine, State of"},{Code:"PA",Name:"Panama"},{Code:"PG",Name:"Papua New Guinea"},{Code:"PY",Name:"Paraguay"},{Code:"PE",Name:"Peru"},{Code:"PH",Name:"Philippines"},{Code:"PN",Name:"Pitcairn"},{Code:"PL",Name:"Poland"},{Code:"PT",Name:"Portugal"},{Code:"PR",Name:"Puerto Rico"},{Code:"QA",Name:"Qatar"},{Code:"RO",Name:"Romania"},{Code:"RU",Name:"Russian Federation"},{Code:"RW",Name:"Rwanda"},{Code:"SH",Name:"Saint Helena, Ascension and Tristan da Cunha"},{Code:"KN",Name:"Saint Kitts and Nevis"},{Code:"LC",Name:"Saint Lucia"},{Code:"MF",Name:"Saint Martin (French part)"},{Code:"PM",Name:"Saint Pierre and Miquelon"},{Code:"VC",Name:"Saint Vincent and the Grenadines"},{Code:"WS",Name:"Samoa"},{Code:"SM",Name:"San Marino"},{Code:"ST",Name:"Sao Tome and Principe"},{Code:"SA",Name:"Saudi Arabia"},{Code:"SN",Name:"Senegal"},{Code:"RS",Name:"Serbia"},{Code:"SC",Name:"Seychelles"},{Code:"SL",Name:"Sierra Leone"},{Code:"SG",Name:"Singapore"},{Code:"SX",Name:"Sint Maarten (Dutch part)"},{Code:"SK",Name:"Slovakia"},{Code:"SI",Name:"Slovenia"},{Code:"SB",Name:"Solomon Islands"},{Code:"SO",Name:"Somalia"},{Code:"ZA",Name:"South Africa"},{Code:"GS",Name:"South Georgia and the South Sandwich Islands"},{Code:"SS",Name:"South Sudan"},{Code:"ES",Name:"Spain"},{Code:"LK",Name:"Sri Lanka"},{Code:"SD",Name:"Sudan"},{Code:"SR",Name:"Suriname"},{Code:"SJ",Name:"Svalbard and Jan Mayen"},{Code:"SZ",Name:"Swaziland"},{Code:"SE",Name:"Sweden"},{Code:"CH",Name:"Switzerland"},{Code:"SY",Name:"Syrian Arab Republic"},{Code:"TW",Name:"Taiwan, Province of China"},{Code:"TJ",Name:"Tajikistan"},{Code:"TZ",Name:"Tanzania, United Republic of"},{Code:"TH",Name:"Thailand"},{Code:"TL",Name:"Timor-Leste"},{Code:"TG",Name:"Togo"},{Code:"TK",Name:"Tokelau"},{Code:"TO",Name:"Tonga"},{Code:"TT",Name:"Trinidad and Tobago"},{Code:"TN",Name:"Tunisia"},{Code:"TR",Name:"Turkey"},{Code:"TM",Name:"Turkmenistan"},{Code:"TC",Name:"Turks and Caicos Islands"},{Code:"TV",Name:"Tuvalu"},{Code:"UG",Name:"Uganda"},{Code:"UA",Name:"Ukraine"},{Code:"AE",Name:"United Arab Emirates"},{Code:"GB",Name:"United Kingdom"},{Code:"US",Name:"United States"},{Code:"UM",Name:"United States Minor Outlying Islands"},{Code:"UY",Name:"Uruguay"},{Code:"UZ",Name:"Uzbekistan"},{Code:"VU",Name:"Vanuatu"},{Code:"VE",Name:"Venezuela, Bolivarian Republic of"},{Code:"VN",Name:"Viet Nam"},{Code:"VG",Name:"Virgin Islands, British"},{Code:"VI",Name:"Virgin Islands, U.S."},{Code:"WF",Name:"Wallis and Futuna"},{Code:"EH",Name:"Western Sahara"},{Code:"YE",Name:"Yemen"},{Code:"ZM",Name:"Zambia"},{Code:"ZW",Name:"Zimbabwe"}],Je=t(254),We=t(250),Ze=(t(114),function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).columns=[{label:"#",field:"id"},{label:"Company",field:"companyName"},{label:"User Name",field:"contactPersonName"},{label:"Email",field:"contactPersonEmail"},{label:"Active",field:"active"},{label:"Manage",field:"manage"}],n.userManagementActions={toggleActive:"toggleActive",removeUser:"removeUser",addUser:"addUser"},n.state={rows:[],active:!1},n.manageUser=n.manageUser.bind(Object(je.a)(n)),n.onChange=n.onChange.bind(Object(je.a)(n)),n.resetForm=n.resetForm.bind(Object(je.a)(n)),n.resetForm=n.resetForm.bind(Object(je.a)(n)),n.checkUserExistsResponse=n.checkUserExistsResponse.bind(Object(je.a)(n)),n.addUserResponse=n.addUserResponse.bind(Object(je.a)(n)),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.userData||this.props.fetchUsers()}},{key:"onChange",value:function(e,a){this.setState(Object(we.a)({},e,a));var t=document.getElementById("".concat(e,"_err_msg"));t&&(t.style.display="none","contactPersonEmail"===e&&(document.getElementById("contactPersonEmailExists_err_msg").style.display="none"))}},{key:"checkUserExistsResponse",value:function(e){if(console.log("response: ",e),e.success)document.getElementById("contactPersonEmailExists_err_msg").style.display="block";else{var a=this.state,t=a.companyName,n=a.location,r=a.postCode,o=a.country,i=a.employeeSize,s=a.contactPersonName,l=a.contactPersonEmail,c=a.contactPersonRole,m=a.contactPersonNumber,d={name:s,email:l,password:a.password,role:c,contact:m,company:{name:t,location:n,postCode:r,country:o,employeeSize:i||-1},active:a.active};console.log("new user: ",d),this.props.addUser(d,this.addUserResponse)}}},{key:"addUserResponse",value:function(e){console.log("response: ",e),e.success&&(this.state.active&&this.props.filterUsers(N),this.state.active||this.props.filterUsers(k),this.props.fetchUsers())}},{key:"manageUser",value:function(e,a){var t;switch(e){case this.userManagementActions.toggleActive:return(t=Object(h.a)({},this.props.userData.find((function(e){return e.email===a})))).active=!t.active,void this.props.updateUser(a,t);case this.userManagementActions.removeUser:return t=Object(h.a)({},this.props.userData.find((function(e){return e.email===a}))),void this.props.removeUser(t);case this.userManagementActions.addUser:if(!this.state.companyName)return void(document.getElementById("companyName_err_msg").style.display="block");if(!this.state.location)return void(document.getElementById("location_err_msg").style.display="block");if(!this.state.postCode)return void(document.getElementById("postCode_err_msg").style.display="block");if(!this.state.country)return void(document.getElementById("country_err_msg").style.display="block");if(!this.state.contactPersonName)return void(document.getElementById("contactPersonName_err_msg").style.display="block");if(!this.state.contactPersonEmail)return void(document.getElementById("contactPersonEmail_err_msg").style.display="block");if(!M(this.state.contactPersonEmail))return void(document.getElementById("contactPersonEmail_err_msg").style.display="block");if(this.props.existingUserCheck)return;return this.state.contactPersonRole?this.state.contactPersonNumber?this.state.password?this.state.password!==this.state.password_re?void(document.getElementById("password_re_err_msg").style.display="block"):void this.props.checkUserExists(this.state.contactPersonEmail,this.checkUserExistsResponse):void(document.getElementById("password_err_msg").style.display="block"):void(document.getElementById("contactPersonNumber_err_msg").style.display="block"):void(document.getElementById("contactPersonRole_err_msg").style.display="block");default:return void console.log("will act as default")}}},{key:"resetForm",value:function(){this.setState({companyName:"",location:"",postCode:"",country:"",employeeSize:"",contactPersonName:"",contactPersonEmail:"",contactPersonRole:"",contactPersonNumber:"",password:"",password_re:"",active:!1})}},{key:"render",value:function(){var e=this;if(this.props.userFilter===E||this.props.userFilter===N||this.props.userFilter===k){var a;if(this.props.userData&&this.props.userData.length>0){var t=1;a=this.props.userData.map((function(a){return e.props.userFilter!==N||a.active?e.props.userFilter===k&&a.active?{}:{id:t++,companyName:a.company.name,contactPersonName:a.name,contactPersonEmail:a.email,active:(n=a.active,o.a.createElement(p.b,{size:"sm",rounded:!0,color:n?"success":"danger"},n?"Active":"Inactive")),action:o.a.createElement(Ge,{trigger:function(e){e.isOpen;var a=e.triggerRef,t=e.toggle;return o.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-ripple-color":"dark",ref:a,onClick:t},"Manage User")},id:a.email,options:[{name:function(){return a.active?"Deactivate User":"Activate User"},action:e.userManagementActions.toggleActive},{name:function(){return"Remove User"},action:e.userManagementActions.removeUser}],callback:e.manageUser})}:{};var n}))}return o.a.createElement(p.r,{btn:!0},o.a.createElement(p.t,{columns:this.columns}),o.a.createElement(p.s,{rows:a}))}if(this.props.userFilter===O){var n=Ke.map((function(e){return o.a.createElement(Je.a,{value:e.Code},e.Name)}));return o.a.createElement("form",{className:"needs-validation",onSubmit:function(a){a.preventDefault(),e.manageUser(e.userManagementActions.addUser)}},o.a.createElement(p.e,null,o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"12"},o.a.createElement("p",{id:"x",className:"h5 text-center mb-4"},"Company"),o.a.createElement(p.h,{label:"Company Name",group:!0,value:this.state.companyName,onChange:function(a){return e.onChange("companyName",a.target.value)}}),o.a.createElement("div",{id:"companyName_err_msg",className:"invalid-feedback"},"Required"),o.a.createElement(p.h,{label:"Location",group:!0,value:this.state.location,onChange:function(a){return e.onChange("location",a.target.value)}}),o.a.createElement("div",{id:"location_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Post Code",group:!0,value:this.state.postCode,onChange:function(a){return e.onChange("postCode",a.target.value)}}),o.a.createElement("div",{id:"postCode_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"4"},o.a.createElement(We.a,{className:"countryDD",style:{color:"#757575","padding-top":"32px","padding-left":"4px"},label:"Country",value:this.state.country,onChange:function(a){return e.onChange("country",a.target.value)}},n),o.a.createElement("div",{id:"country_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Employee Size",group:!0,value:this.state.employeeSize,onChange:function(a){return e.onChange("employeeSize",a.target.value)}}))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("p",{id:"x",className:"h5 text-center mb-4 mt-3"},"Contact Person (Account Holder)"),o.a.createElement(p.h,{label:"Name",group:!0,value:this.state.contactPersonName,onChange:function(a){return e.onChange("contactPersonName",a.target.value)}}),o.a.createElement("div",{id:"contactPersonName_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Email (used as login credential)",group:!0,type:"email",value:this.state.contactPersonEmail,onChange:function(a){return e.onChange("contactPersonEmail",a.target.value)}}),o.a.createElement("div",{id:"contactPersonEmail_err_msg",className:"invalid-feedback"},"Required"),o.a.createElement("div",{id:"contactPersonEmailExists_err_msg",className:"invalid-feedback"},"Email address already in use")),o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Role",group:!0,value:this.state.contactPersonRole,onChange:function(a){return e.onChange("contactPersonRole",a.target.value)}}),o.a.createElement("div",{id:"contactPersonRole_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Contact Number",group:!0,value:this.state.contactPersonNumber,onChange:function(a){return e.onChange("contactPersonNumber",a.target.value)}}),o.a.createElement("div",{id:"contactPersonNumber_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"5"},o.a.createElement(p.h,{label:"Enter Password",group:!0,type:"password",value:this.state.password,onChange:function(a){return e.onChange("password",a.target.value)}}),o.a.createElement("div",{id:"password_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"5"},o.a.createElement(p.h,{label:"Retype password",group:!0,type:"password",value:this.state.password_re,onChange:function(a){return e.onChange("password_re",a.target.value)}}),o.a.createElement("div",{id:"password_re_err_msg",className:"invalid-feedback"},"Passwords do not match")),o.a.createElement(p.c,{md:"2"},o.a.createElement(He.a,{control:o.a.createElement(ze.a,{checked:this.state.active,onChange:function(a){return e.onChange("active",a.target.checked)},name:"active"}),label:"Active"}))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("div",{className:"text-center"},o.a.createElement(p.b,{outline:!0,color:"success",type:"submit"},"Register New User"),o.a.createElement(p.b,{outline:!0,color:"warning",onClick:this.resetForm},"Clear"))))))}}}]),t}(r.Component)),Ye=Object(u.b)((function(e){return{userData:e.userPoolData,userFilter:e.userFilter}}),(function(e){return{fetchUsers:function(){return e(C({url:oe,callParams:{method:ue,headers:de,credentials:"include"},onSuccess:B.type,onFailure:B.type}))},updateUser:function(a,t){return e((n=a,r=t,C({url:ie,callParams:{method:ge,headers:de,credentials:"include",body:JSON.stringify({updatedUser:r,userEmail:n})},onSuccess:B.type,onFailure:B.type})));var n,r},removeUser:function(a){return e((t=a,C({url:se,callParams:{method:ge,headers:de,credentials:"include",body:JSON.stringify({removedUser:t})},onSuccess:B.type,onFailure:B.type})));var t},checkUserExists:function(a,t){return e(ve(a,t))},addUser:function(a,t){return e(function(e,a){return C({url:le,callParams:{method:ge,headers:de,credentials:"include",body:JSON.stringify({newUser:e})},cb:a,onSuccess:B.type})}(a,t))},filterUsers:function(a){return e(Ce(a))}}}))(Ze),Qe=t(235),Xe=t(95),$e=t.n(Xe),ea=t(94),aa=t.n(ea),ta=t(248),na=t(247),ra=t(236),oa=t(237),ia=t(238),sa=t(239),la=t(240),ca=t(243),ma=t(244),da=t(241),ua=t(242),pa=t(245),ga=t(246),ha=t(126),va=t.n(ha),ba=t(127),Ca=t.n(ba),fa=(t(188),t(46)),ya=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).columns=[{label:"#",field:"id"},{label:"Campaign",field:"name"},{label:"Campaign Balance",field:"balance"},{label:"Video Duration",field:"duration"},{label:"Intro Text",field:"intro"},{label:"URL",field:"url"},{label:"Share",field:"share"},{label:"Manage",field:"manage"}],n.campaignManagementActions={addCampaign:"addCampaign",removeCampaign:"removeCampaign",updateCampaign:"updateCampaign",mailingList:"mailingList"},n.popups={editCampaignFiller:"editeCampaignFiller",mailList:"mailList"},n.state={rows:[],intro_len:300,startdate:new Date,enddate:new Date,modalShow:!1,mailList:{popup:!1,campaign:null,file:void 0}},n.manageCampaign=n.manageCampaign.bind(Object(je.a)(n)),n.onChange=n.onChange.bind(Object(je.a)(n)),n.resetForm=n.resetForm.bind(Object(je.a)(n)),n.checkCampaignURLExistsResponse=n.checkCampaignURLExistsResponse.bind(Object(je.a)(n)),n.addCampaignResponse=n.addCampaignResponse.bind(Object(je.a)(n)),n.togglePopups=n.togglePopups.bind(Object(je.a)(n)),n.setMailingList=n.setMailingList.bind(Object(je.a)(n)),n.sendMailingList=n.sendMailingList.bind(Object(je.a)(n)),n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.campaignData||this.props.fetchCampaigns(this.props.email)}},{key:"onChange",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if("intro"===e&&(a.length>300&&(a=a.substring(0,300)),this.setState({intro_len:300-a.length})),"question"===e){var r=this.state.questions?this.state.questions:[];t>=0?0===n?r[t].type="or"===r[t].type?"and":"or":r[t].statement=a:r[r.length]={statement:a,type:"or",options:["yes","no"]},this.setState({questions:r})}if("question-r"===e){var o=this.state.questions;return t>=0&&(o[t]=null),void this.setState({questions:o})}if("question-option"===e){var i=this.state.questions;return i?(n>=0?i[t].options[n]=a:i[t].options?i[t].options.push(a):i[t].options=[a],void this.setState({questions:i})):void alert("Error: Add option to invalid question")}if("question-option-r"===e){var s=this.state.questions;return s?(n>=0&&s[t].options&&s[t].options.length>0&&(s[t].options=s[t].options.filter((function(e,a){return a!==n}))),void this.setState({questions:s})):void alert("Error: Remove option to invalid question")}"name"===e&&(document.getElementById("campaignNameExists_err_msg").style.display="none"),"url"===e&&(document.getElementById("campaignURLExists_err_msg").style.display="none",a.includes(" ")?document.getElementById("validURL_err_msg").style.display="block":document.getElementById("validURL_err_msg").style.display="none");var l,c=document.getElementById("".concat(e.includes("date")?"date":e,"_err_msg"));(c&&(c.style.display="none"),"startdate"!==e)?("duration"===e&&(a<0?a=0:a>120&&(a=120)),this.setState(Object(we.a)({},e,a))):this.setState((l={},Object(we.a)(l,e,a),Object(we.a)(l,"enddate",a),l))}},{key:"setMailingList",value:function(e){var a=e.target.files[0];this.setState(Object(h.a)(Object(h.a)({},this.state),{},{mailList:Object(h.a)(Object(h.a)({},this.state.mailList),{},{file:a})}))}},{key:"sendMailingList",value:function(){this.togglePopups(this.popups.mailList),this.props.uploadMailList(this.state.mailList.campaign.campaignURL,this.state.mailList.file)}},{key:"checkCampaignURLExistsResponse",value:function(e){if(console.log("response: ",e),e.success)document.getElementById("campaignURLExists_err_msg").style.display="block";else{var a=this.state.questions?this.state.questions.filter((function(e){return null!==e&&0!==e.length})):[],t={email:this.props.email,campaignURL:this.state.url,name:this.state.name,balance:parseInt("10"),duration:parseInt(this.state.duration),intro:this.state.intro,startdate:this.state.startdate.getTime(),enddate:this.state.enddate.getTime(),questions:a};console.log("new campaign: ",t),this.setState({mailList:Object(h.a)(Object(h.a)({},this.state.mailList),{},{campaign:t})}),this.props.addCampaign(t,this.addCampaignResponse)}}},{key:"addCampaignResponse",value:function(e){console.log("response: ",e),e.success&&(this.props.filterCampaigns(P),this.props.fetchCampaigns(this.props.email),this.resetForm(),this.togglePopups(this.popups.mailList))}},{key:"manageCampaign",value:function(e,a){var t,n=this;switch(e){case this.campaignManagementActions.mailingList:return void this.togglePopups(this.popups.mailList,!0,this.props.campaignData.filter((function(e){return e.campaignURL===a}))[0]);case this.campaignManagementActions.updateCampaign:return void this.setState({modalShow:!this.state.modalShow});case this.campaignManagementActions.removeCampaign:return t=Object(h.a)({},this.props.campaignData.find((function(e){return e.campaignURL===a}))),void this.props.removeCampaign(t.campaignURL,(function(){return n.props.fetchCampaigns(n.props.email)}));case this.campaignManagementActions.addCampaign:return this.state.name?this.state.duration?!this.state.url||this.state.url.includes(" ")?void(document.getElementById("validURL_err_msg").style.display="block"):this.state.startdate&&this.state.enddate?this.state.startdate.getTime()>=this.state.enddate.getTime()?void(document.getElementById("date_err_msg").style.display="block"):void this.props.checkCampaignURLExists(this.state.url,this.checkCampaignURLExistsResponse):void(document.getElementById("date_err_msg").style.display="block"):void(document.getElementById("duration_err_msg").style.display="block"):void(document.getElementById("name_err_msg").style.display="block");default:return void console.log("will act as default")}}},{key:"resetForm",value:function(){this.setState({name:"",url:"",duration:"",intro:"",startdate:new Date,enddate:new Date,questions:null})}},{key:"togglePopups",value:function(e,a,t){switch(e){case this.popups.mailList:this.setState({mailList:{campaign:void 0===t?this.state.mailList.campaign:t,popup:void 0===a?!this.state.mailList.popup:a}})}}},{key:"render",value:function(){var e=this,a=this.state.mailList.campaign?o.a.createElement(fa.a,{show:this.state.mailList.popup,onHide:function(){return e.togglePopups(e.popups.mailList)}},o.a.createElement(fa.a.Header,{closeButton:!0},o.a.createElement(fa.a.Title,null,"Mailing List for ",o.a.createElement("span",{style:{color:"#ff0000"}},this.state.mailList.campaign.name))),o.a.createElement(fa.a.Body,null,o.a.createElement("p",null,"Upload a Mailing List (SMS/ Email) to send invite for review (optional)"),o.a.createElement("input",{style:{height:"45px",marginBottom:"12px"},type:"file",class:"form-control",multiple:!1,onChange:this.setMailingList}),o.a.createElement("div",null,o.a.createElement("button",{style:{float:"right",padding:"10px 20px 10px 20px"},onClick:this.sendMailingList},"Send")))):void 0;if(this.props.campaignFilter===P||this.props.campaignFilter===w||this.props.campaignFilter===j){var t;if(console.log("Campaign data: ",this.props.campaignData),this.props.campaignData&&this.props.campaignData.length>0){var n=1;t=this.props.campaignData.map((function(a){var t="https://story.patronish.com/?campaign="+a.campaignURL,r=a.intro?a.intro:"-";return{id:n++,name:a.name,balance:a.balance,duration:a.duration,intro:r,url:o.a.createElement(ra.a,{href:t,style:{color:"darkturquoise",fontWeight:"bold",fontSize:"x-large"}},a.campaignURL),share:[o.a.createElement(oa.a,{style:{margin:"10px"},url:t,quote:a.campaignURL},o.a.createElement(ia.a,{size:36})),o.a.createElement(sa.a,{style:{margin:"10px"},url:t,title:a.campaignURL},o.a.createElement(la.a,{size:36})),o.a.createElement(da.a,{style:{margin:"10px"},url:t,title:a.campaignURL},o.a.createElement(ua.a,{size:36})),o.a.createElement(ca.a,{style:{margin:"10px"},url:t,title:a.campaignURL},o.a.createElement(ma.a,{size:36})),o.a.createElement(pa.a,{style:{margin:"10px"},url:t,title:a.campaignURL,source:"http://clients.patronish.com"},o.a.createElement(ga.a,{size:36}))],action:o.a.createElement(Ge,{trigger:function(e){e.isOpen;var a=e.triggerRef,t=e.toggle;return o.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-ripple-color":"dark",ref:a,onClick:t},"Manage Campaign")},id:a.campaignURL,options:[{name:function(){return"Mailing List"},action:e.campaignManagementActions.mailingList},{name:function(){return"Edit Campaign"},action:e.campaignManagementActions.updateCampaign},{name:function(){return"Delete Campaign"},action:e.campaignManagementActions.removeCampaign}],callback:e.manageCampaign})}}))}return o.a.createElement(o.a.Fragment,null,a,o.a.createElement(p.r,{btn:!0},o.a.createElement(p.t,{columns:this.columns}),o.a.createElement(p.s,{rows:t})),o.a.createElement(fa.a,{show:this.state.modalShow,onHide:function(){return e.manageCampaign(e.campaignManagementActions.updateCampaign)}},o.a.createElement(fa.a.Header,{closeButton:!0},o.a.createElement(fa.a.Title,null,"Edit Campaign")),o.a.createElement(fa.a.Body,null,"This campaign has been expired, it can't be edited.")))}if(this.props.campaignFilter===R){var r=this.state.questions?o.a.createElement(o.a.Fragment,null,this.state.questions.map((function(a,t){if(null===a)return o.a.createElement(o.a.Fragment,null);var n=void 0;return a.options&&a.options.length>0&&(n=a.options.map((function(a,n){return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.c,{md:"5",className:"option",style:{"max-width":"45.8%",flex:"0 0 45.8%"}},o.a.createElement(p.h,{type:"text",group:!0,value:a,onChange:function(a){return e.onChange("question-option",a.target.value,t,n)}})),o.a.createElement(p.c,{md:"1",style:{"padding-left":"0px","padding-right":"0px","max-width":"4%"}},o.a.createElement(Qe.a,{size:"small",className:"mt-1 ml-2",onClick:function(a){return e.onChange("question-option-r",null,t,n)}},o.a.createElement(aa.a,null))))}))),o.a.createElement(p.q,{key:t,className:"question"},o.a.createElement(p.c,{md:"8",style:{"max-width":"78%",flex:"0 0 78%"}},o.a.createElement(p.h,{type:"text",group:!0,value:a.statement,onChange:function(a){return e.onChange("question",a.target.value,t)}})),o.a.createElement(p.c,{md:"2",style:{"padding-left":"0px","padding-right":"0px",flex:"0 0 13.6%","max-width":"13.6%"}},o.a.createElement(na.a,{className:"mt-4",style:{"font-size":"small"},variant:"contained",color:"or"===a.type?"primary":"secondary",startIcon:"or"===a.type?o.a.createElement(va.a,null):o.a.createElement(Ca.a,null),onClick:function(a){return e.onChange("question",null,t,0)}},"or"===a.type?"Single Choice":"Multi Select")),o.a.createElement(p.c,{md:"1",style:{"padding-left":"0px","padding-right":"0px","max-width":"4%"}},o.a.createElement(Qe.a,{size:"small",className:"mt-4 ml-2",onClick:function(a){return e.onChange("question-option","option?",t)}},o.a.createElement($e.a,null))),o.a.createElement(p.c,{md:"1",style:{"padding-left":"0px","padding-right":"0px","max-width":"4%"}},o.a.createElement(Qe.a,{size:"small",className:"mt-4 ml-2",onClick:function(a){return e.onChange("question-r",null,t)}},o.a.createElement(aa.a,null))),n)}))):o.a.createElement(o.a.Fragment,null);return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:"needs-validation",onSubmit:function(a){a.preventDefault(),e.manageCampaign(e.campaignManagementActions.addCampaign)}},o.a.createElement(p.e,null,o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"6"},o.a.createElement(p.h,{label:"Campaign Name",group:!0,value:this.state.name,onChange:function(a){return e.onChange("name",a.target.value)}}),o.a.createElement("div",{id:"name_err_msg",className:"invalid-feedback"},"Required"),o.a.createElement("div",{id:"campaignNameExists_err_msg",className:"invalid-feedback"},"This campaign name is taken")),o.a.createElement(p.c,{md:"6"},o.a.createElement(p.h,{label:"Video Duration (sec)",group:!0,type:"number",value:this.state.duration,onChange:function(a){return e.onChange("duration",a.target.value)}}),o.a.createElement("div",{id:"duration_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"12"},o.a.createElement(p.h,{label:"Campaign URL (no spaces) https://story.patronish.com/",group:!0,value:this.state.url,onChange:function(a){return e.onChange("url",a.target.value)}}),o.a.createElement("div",{id:"validURL_err_msg",className:"invalid-feedback"},"Valid URL Required (no spaces)"),o.a.createElement("div",{id:"campaignURLExists_err_msg",className:"invalid-feedback"},"This campaign URL is taken"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"12"},o.a.createElement(p.h,{label:"Campaign Introduction Text (optional - ".concat(this.state.intro_len,")"),group:!0,type:"textarea",value:this.state.intro,onChange:function(a){return e.onChange("intro",a.target.value)}}))),o.a.createElement(p.q,{className:"mb-4"},o.a.createElement(p.c,{md:"6"},o.a.createElement(ta.a,{label:"Start Date",autoOk:!0,variant:"inline",minDate:new Date,inputVariant:"outlined",format:"dd/MM/yyyy",InputAdornmentProps:{position:"start"},value:this.state.startdate,onChange:function(a){return e.onChange("startdate",a)}})),o.a.createElement(p.c,null,o.a.createElement(ta.a,{label:"End Date",autoOk:!0,variant:"inline",minDate:this.state.startdate,inputVariant:"outlined",format:"dd/MM/yyyy",InputAdornmentProps:{position:"start"},value:this.state.enddate,onChange:function(a){return e.onChange("enddate",a)}}))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("div",{id:"date_err_msg",className:"invalid-feedback"},"Please select valid date(s) with at-least 1 day duration"))),r,o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement(na.a,{variant:"outlined",startIcon:o.a.createElement($e.a,null),onClick:function(){return e.onChange("question")}},"Add Question"))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("div",{className:"text-center"},o.a.createElement(p.b,{outline:!0,color:"success",type:"submit"},"Add New Campaign"),o.a.createElement(p.b,{outline:!0,color:"warning",onClick:this.resetForm},"Clear")))))),a)}}}]),t}(r.Component),Ea=Object(u.b)((function(e){return{email:e.userData.email,campaignData:e.campaignList,campaignFilter:e.campaignFilter}}),(function(e){return{fetchCampaigns:function(a){return e(ye(a))},updateCampaign:function(a,t){return e(function(e,a){return C({url:te+"/updateCampaign/"+e,callParams:{method:pe,headers:de,credentials:"include",body:JSON.stringify({updatedCampaign:a})},onSuccess:q.type,onFailure:q.type})}(a,t))},removeCampaign:function(a,t){return e(function(e,a){return C({url:te+"/removeCampaign/"+e,callParams:{method:he,headers:de,credentials:"include"},cb:a})}(a,t))},checkCampaignURLExists:function(a,t){return e(function(e,a){return C({url:te+"/campaignURLExists/"+e,callParams:{method:ue,headers:de,credentials:"include"},cb:a})}(a,t))},addCampaign:function(a,t){return e(function(e,a){return C({url:te+"/addCampaign",callParams:{method:ge,headers:de,credentials:"include",body:JSON.stringify({newCampaign:e})},cb:a,onSuccess:q.type})}(a,t))},filterCampaigns:function(a){return e(fe(a))},uploadMailList:function(a,t){return e(function(e,a){var t=te+"/setMailingList/"+e,n=new FormData;return n.append("file",a),C({url:t,callParams:{method:pe,headersFileUpl:me,credentials:"include",body:n}})}(a,t))}}}))(ya),Na=t(128),ka=t.n(Na),Oa=(t(189),function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).player={},e}return Object(c.a)(t,[{key:"onPlayerReady",value:function(e){this.player=e}},{key:"onVideoPlay",value:function(e){}},{key:"onVideoEnd",value:function(){}},{key:"render",value:function(){return null==this.props.src?o.a.createElement(o.a.Fragment,null):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{height:"100%"}},o.a.createElement(ka.a,{className:"player video-js",controls:!0,src:{src:this.props.src,type:"video/mp4"},onReady:this.onPlayerReady.bind(this),onPlay:this.onVideoPlay.bind(this),onEnd:this.onVideoEnd.bind(this)})))}}]),t}(r.Component)),Pa=(t(190),function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).generateTable=n.generateTable.bind(Object(je.a)(n)),n.downloadVideo=n.downloadVideo.bind(Object(je.a)(n)),n.playVideo=n.playVideo.bind(Object(je.a)(n)),n.closeVideo=n.closeVideo.bind(Object(je.a)(n)),n.state={videoUrl:void 0},n}return Object(c.a)(t,[{key:"generateTable",value:function(){var e=this;if(!this.props.albumName)return o.a.createElement("h3",null,"No album selected");if(!this.props.albumList)return o.a.createElement("h3",null,"No videos in this album");var a=this.props.albumList.map((function(a,t){var n=a.key.toString();n=(n=n.substr(n.indexOf("/")+1)).substr(0,n.indexOf("."));var r=new Date(parseInt(n)).toDateString();return o.a.createElement("tr",{key:a.key},o.a.createElement("td",null,t+1),o.a.createElement("td",null,a.key),o.a.createElement("td",null,r),o.a.createElement("td",null,o.a.createElement("div",null,o.a.createElement("button",{type:"button",className:"btn btn-outline-success","data-ripple-color":"dark",onClick:function(){e.props.overlay(),e.playVideo(a.url)}},"Play"),o.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-ripple-color":"dark",onClick:function(){return e.downloadVideo(a.url)}},"Download"),o.a.createElement("button",{type:"button",className:"btn btn-outline-danger","data-ripple-color":"dark",onClick:function(){e.props.overlay(),e.props.deleteVideo(a.key)}},"Delete"))),o.a.createElement("td",null,o.a.createElement("div",null,o.a.createElement(oa.a,{style:{margin:"10px"},url:a.url,quote:e.props.albumName},o.a.createElement(ia.a,{size:36})),o.a.createElement(sa.a,{style:{margin:"10px"},url:a.url,title:e.props.albumName},o.a.createElement(la.a,{size:36})),o.a.createElement(da.a,{style:{margin:"10px"},url:a.url,title:e.props.albumName},o.a.createElement(ua.a,{size:36})),o.a.createElement(ca.a,{style:{margin:"10px"},url:a.url,title:e.props.albumName},o.a.createElement(ma.a,{size:36})),o.a.createElement(pa.a,{style:{margin:"10px"},url:a.url,title:e.props.albumName,source:"http://clients.patronish.com"},o.a.createElement(ga.a,{size:36})))))}));return o.a.createElement("table",{id:"playlist"},o.a.createElement("tbody",null,a))}},{key:"generateTable2",value:function(){var e=this;if(!this.props.albumName)return o.a.createElement("h3",null,"No album selected");if(!this.props.albumList)return o.a.createElement("h3",null,"No videos in this album");var a=this.props.albumList.filter((function(e){return e.url.endsWith(".mp4")})).map((function(e){return{video:e}})).map((function(a){var t=e.props.albumList.filter((function(e){return!e.url.endsWith(".mp4")&&e.url.includes(a.video.key.substring(0,a.video.key.length-4))}));return Object(h.a)(Object(h.a)({},a),{},{image:t.length>=1?t[0]:void 0})}));return console.log(""),a.map((function(a,t){return o.a.createElement("div",{className:"videoCard"},o.a.createElement("div",{className:"videoThumbnail",style:{"background-image":"url(".concat(a.image?a.image.url:"video_not_found.png",")"),"background-size":"cover","background-repeat":"no-repeat"},onClick:function(){e.props.overlay(),e.playVideo(a.video.url)}}),o.a.createElement("div",{className:"videoDecription"},o.a.createElement("p",null,a.video.key),o.a.createElement("button",{type:"button",className:"btn-outline-primary","data-ripple-color":"dark",onClick:function(){return e.downloadVideo(a.video.url)}},"Download"),o.a.createElement("button",{type:"button",className:"btn-outline-danger","data-ripple-color":"dark",onClick:function(){e.props.overlay(),e.props.deleteVideo(a.video.key)}},"Delete")))}))}},{key:"playVideo",value:function(e){this.setState({videoUrl:e})}},{key:"closeVideo",value:function(){this.setState({videoUrl:void 0}),this.props.closeVideo()}},{key:"downloadVideo",value:function(e){window.location.href=e}},{key:"render",value:function(){var e=this,a=this.generateTable2(),t="none";return this.state.videoUrl&&(t="block"),o.a.createElement("div",null,o.a.createElement("div",{id:"overlay",className:"overlay",style:{display:t}}),this.props.albumName?o.a.createElement("h1",null,"Campaign ",o.a.createElement("b",null,this.props.albumName)):o.a.createElement(o.a.Fragment,null),o.a.createElement("div",{id:"playlistWrapper",className:"flexContainer"},a),o.a.createElement("div",{id:"player",className:"playerWrapper",style:{display:t}},o.a.createElement("button",{className:"closeButton",onClick:function(){return e.closeVideo()}},"\u2716"),this.state.videoUrl?o.a.createElement(Oa,{src:this.state.videoUrl}):o.a.createElement(o.a.Fragment,null)))}}]),t}(r.Component)),wa=Object(u.b)((function(e){return{campaignFilter:e.campaignData,albumName:e.albumName,albumList:e.albumList,videoUrl:e.videoUrl}}),(function(e){return{deleteVideo:function(a){return e(function(e){var a=te+"/removeCampaignVideo/"+e.replace("/","$");return C({url:a,callParams:{method:he,headers:de,credentials:"include"},onSuccess:G.type,onFailure:G.type})}(a))},closeVideo:function(){return e(z({}))},overlay:function(){return e(Z())}}}))(Pa),ja=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,null),o.a.createElement(Pe,null),o.a.createElement("div",{style:{marginLeft:"270px",marginTop:"64px",padding:"10px"}},this.props.activeModule===f.user?o.a.createElement(Ye,null):"",this.props.activeModule===f.campaign?o.a.createElement(Ea,null):"",this.props.activeModule===f.video?o.a.createElement(wa,null):""))}}]),t}(r.Component),Ra=Object(u.b)((function(e){return{activeModule:e.activeModule}}),(function(e){return{}}))(ja);function _a(e){var a=e.classes,t=e.prepend,n=e.text,r=e.append,i=e.callback;return o.a.createElement("p",{className:a},t,o.a.createElement("strong",{style:{cursor:"pointer"},onClick:function(){return i()}},n),r)}var Ma="success",Sa="error",Ua=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).onChange=n.onChange.bind(Object(je.a)(n)),n.initLogin=n.initLogin.bind(Object(je.a)(n)),n.notify=n.notify.bind(Object(je.a)(n)),n.state={},n}return Object(c.a)(t,[{key:"onChange",value:function(e,a){this.setState(Object(we.a)({},e,a))}},{key:"initLogin",value:function(){this.props.login(this.state.email,this.state.password,this.notify)}},{key:"notify",value:function(e){e.success?this.props.notify(Ma,"Login successful"):this.props.notify(Sa,e.message)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{height:"100vh"}},o.a.createElement("div",{className:"bg-dark col-12 container h-100"},o.a.createElement("div",{className:"row align-items-center h-100"},o.a.createElement("div",{className:"col-sm-10 col-md-8 col-lg-6 col-xl-4  mx-auto"},o.a.createElement(p.e,null,o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"12"},o.a.createElement("p",{className:"h3 text-white text-center mb-4"},"Sign in"),o.a.createElement("div",{className:"grey-text"},o.a.createElement(p.h,{label:"Email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong email address format",success:"right",onChange:function(a){return e.onChange("email",a.target.value)}}),o.a.createElement(p.h,{label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0,onChange:function(a){return e.onChange("password",a.target.value)}})),o.a.createElement("div",{className:"text-right"},o.a.createElement(_a,{classes:"text-white",text:"Reset Password",callback:function(){return e.props.navigate(f.passwordReset)}})),o.a.createElement("div",{className:"text-center"},o.a.createElement(p.b,{onClick:this.initLogin},"Login")),o.a.createElement("div",{className:"text-center mt-3"},o.a.createElement(_a,{classes:"text-white",prepend:"Don't have an account? ",text:"Register",callback:function(){return e.props.navigate(f.register)}})))))))))}}]),t}(r.Component),La=Object(u.b)((function(e){return{loading:e.loading}}),(function(e){return{login:function(a,t,n){return e(function(e,a,t){return C({url:X,callParams:{method:ge,headers:de,credentials:"include",body:JSON.stringify({email:e,password:a})},cb:t,onSuccess:I.type,onFailure:I.type})}(a,t,n))},navigate:function(a){return e(be(a))}}}))(Ua),xa=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).onChange=n.onChange.bind(Object(je.a)(n)),n.initRegister=n.initRegister.bind(Object(je.a)(n)),n.checkUserExistsResponse=n.checkUserExistsResponse.bind(Object(je.a)(n)),n.resetForm=n.resetForm.bind(Object(je.a)(n)),n.notify=n.notify.bind(Object(je.a)(n)),n.state={companyName:void 0},n}return Object(c.a)(t,[{key:"onChange",value:function(e,a){this.setState(Object(we.a)({},e,a));var t=document.getElementById("".concat(e,"_err_msg"));t&&(t.style.display="none","contactPersonEmail"===e&&(document.getElementById("contactPersonEmailExists_err_msg").style.display="none"))}},{key:"initRegister",value:function(){this.state.companyName?this.state.location?this.state.postCode?this.state.country?this.state.contactPersonName?this.state.contactPersonEmail&&M(this.state.contactPersonEmail)?this.state.contactPersonRole?this.state.contactPersonNumber?this.state.password?this.state.password===this.state.password_re?this.props.checkUserExists(this.state.contactPersonEmail,this.checkUserExistsResponse):document.getElementById("password_re_err_msg").style.display="block":document.getElementById("password_err_msg").style.display="block":document.getElementById("contactPersonNumber_err_msg").style.display="block":document.getElementById("contactPersonRole_err_msg").style.display="block":document.getElementById("contactPersonEmail_err_msg").style.display="block":document.getElementById("contactPersonName_err_msg").style.display="block":document.getElementById("country_err_msg").style.display="block":document.getElementById("postCode_err_msg").style.display="block":document.getElementById("location_err_msg").style.display="block":document.getElementById("companyName_err_msg").style.display="block"}},{key:"checkUserExistsResponse",value:function(e){if(console.log("exists response: ",e),e.success)return console.log("in?"),void(document.getElementById("contactPersonEmailExists_err_msg").style.display="block");console.log("right after");var a=this.state,t=a.companyName,n=a.location,r=a.postCode,o=a.country,i=a.employeeSize,s=a.contactPersonName,l=a.contactPersonEmail,c=a.contactPersonRole,m=a.contactPersonNumber,d={name:s,email:l,password:a.password,role:c,contact:m,company:{name:t,location:n,postCode:r,country:o,employeeSize:i||-1}};console.log("new user: ",d),this.props.addUser(d,this.notify)}},{key:"resetForm",value:function(){this.setState({companyName:"",location:"",postCode:"",country:"",employeeSize:"",contactPersonName:"",contactPersonEmail:"",contactPersonRole:"",contactPersonNumber:"",password:"",password_re:""})}},{key:"notify",value:function(e){e.success?(this.props.notify(Ma,"Registration successful"),this.props.navigate(f.login)):this.props.notify(Sa,e.message)}},{key:"render",value:function(){var e=this,a=Ke.map((function(e){return o.a.createElement(Je.a,{value:e.Code},e.Name)}));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{height:"100vh"}},o.a.createElement("div",{className:"bg-dark col-12 container h-100"},o.a.createElement("div",{className:"row align-items-center h-100"},o.a.createElement("div",{className:"col-sm-10 col-md-8 col-lg-6 col-xl-4  mx-auto"},o.a.createElement("form",{className:"needs-validation",onSubmit:function(a){a.preventDefault(),e.initRegister()}},o.a.createElement(p.e,null,o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"12"},o.a.createElement("p",{id:"x",className:"h3 text-center text-white mb-4"},"Company"),o.a.createElement(p.h,{label:"Company Name",group:!0,value:this.state.companyName,onChange:function(a){return e.onChange("companyName",a.target.value)}}),o.a.createElement("div",{id:"companyName_err_msg",className:"invalid-feedback"},"Required"),o.a.createElement(p.h,{label:"Location",group:!0,value:this.state.location,onChange:function(a){return e.onChange("location",a.target.value)}}),o.a.createElement("div",{id:"location_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Post Code",group:!0,value:this.state.postCode,onChange:function(a){return e.onChange("postCode",a.target.value)}}),o.a.createElement("div",{id:"postCode_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"4"},o.a.createElement(We.a,{className:"countryDD",style:{color:"#757575","padding-top":"32px","padding-left":"4px"},label:"Country",value:this.state.country,onChange:function(a){return e.onChange("country",a.target.value)}},a),o.a.createElement("div",{id:"country_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Employee Size",group:!0,value:this.state.employeeSize,onChange:function(a){return e.onChange("employeeSize",a.target.value)}}))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("p",{id:"x",className:"h3 text-center text-white mb-4 mt-3"},"Contact Person (Account Holder)"),o.a.createElement(p.h,{label:"Name",group:!0,value:this.state.contactPersonName,onChange:function(a){return e.onChange("contactPersonName",a.target.value)}}),o.a.createElement("div",{id:"contactPersonName_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Email (used as login credential)",group:!0,type:"email",value:this.state.contactPersonEmail,onChange:function(a){return e.onChange("contactPersonEmail",a.target.value)}}),o.a.createElement("div",{id:"contactPersonEmail_err_msg",className:"invalid-feedback"},"Required"),o.a.createElement("div",{id:"contactPersonEmailExists_err_msg",className:"invalid-feedback"},"Email address already in use")),o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Role",group:!0,value:this.state.contactPersonRole,onChange:function(a){return e.onChange("contactPersonRole",a.target.value)}}),o.a.createElement("div",{id:"contactPersonRole_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"4"},o.a.createElement(p.h,{label:"Contact Number",group:!0,value:this.state.contactPersonNumber,onChange:function(a){return e.onChange("contactPersonNumber",a.target.value)}}),o.a.createElement("div",{id:"contactPersonNumber_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"6"},o.a.createElement(p.h,{label:"Enter Password",group:!0,type:"password",value:this.state.password,onChange:function(a){return e.onChange("password",a.target.value)}}),o.a.createElement("div",{id:"password_err_msg",className:"invalid-feedback"},"Required")),o.a.createElement(p.c,{md:"6"},o.a.createElement(p.h,{label:"Retype password",group:!0,type:"password",value:this.state.password_re,onChange:function(a){return e.onChange("password_re",a.target.value)}}),o.a.createElement("div",{id:"password_re_err_msg",className:"invalid-feedback"},"Passwords do not match"))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("div",{className:"text-center"},o.a.createElement(p.b,{type:"submit"},"Register New User"),o.a.createElement(p.b,{onClick:this.resetForm},"Clear")))))))))),o.a.createElement(p.b,{outline:!0,color:"success",style:{position:"absolute",top:"0%",right:"0%"},onClick:function(){return e.props.navigate(f.login)}},"Login"))}}]),t}(r.Component),Fa=Object(u.b)((function(e){return{loading:e.loading}}),(function(e){return{checkUserExists:function(a,t){return e(ve(a,t))},addUser:function(a,t){return e(function(e,a){return C({url:ae,callParams:{method:ge,headers:de,credentials:"include",body:JSON.stringify({newUser:e})},cb:a})}(a,t))},navigate:function(a){return e(be(a))}}}))(xa),Ia=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).onChange=n.onChange.bind(Object(je.a)(n)),n.generateOTP=n.generateOTP.bind(Object(je.a)(n)),n.generateOTPResponse=n.generateOTPResponse.bind(Object(je.a)(n)),n.initPasswordReset=n.initPasswordReset.bind(Object(je.a)(n)),n.passwordResetResponse=n.passwordResetResponse.bind(Object(je.a)(n)),n.notify=n.notify.bind(Object(je.a)(n)),n.state={emailInputDisabled:!1},n}return Object(c.a)(t,[{key:"onChange",value:function(e,a){var t=document.getElementById("".concat(e,"_err_msg"));t&&(t.style.display="none"),this.setState(Object(we.a)({},e,a))}},{key:"generateOTP",value:function(e){console.log("At generateOTP response: ",e),e?e.success?this.props.generateOTP(this.state.email,this.generateOTPResponse):(this.setState({emailInputDisabled:!1}),document.getElementById("email_err_msg").style.display="block"):(this.setState({emailInputDisabled:!0}),this.props.checkUserExists(this.state.email,this.generateOTP))}},{key:"generateOTPResponse",value:function(e){return console.log("At generateOTPResponse response: ",e),e.success?(document.getElementById("email_info_msg").style.display="block",void this.notify({success:!0,message:"OTP generation success"})):void this.notify(e)}},{key:"initPasswordReset",value:function(){var e=this.state,a=e.email,t=e.otp,n=e.password;n===e.password_re?t?this.props.passwordReset(a,t,n,this.passwordResetResponse):document.getElementById("otp_err_msg").style.display="block":document.getElementById("password_re_err_msg").style.display="block"}},{key:"passwordResetResponse",value:function(e){e.success&&this.props.navigate(f.login),this.notify(e)}},{key:"notify",value:function(e){console.log("At notify response: ",e),e.success?e.message?this.props.notify(Ma,e.message):this.props.notify(Ma,"Password Reset Successful"):(e.message&&this.props.notify(Sa,e.message),e.err&&this.props.notify(Sa,e.err))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{height:"100vh"}},o.a.createElement("div",{className:"bg-dark col-12 container h-100"},o.a.createElement("div",{className:"row align-items-center h-100"},o.a.createElement("div",{className:"col-sm-10 col-md-8 col-lg-6 col-xl-4 grey-text mx-auto"},o.a.createElement(p.e,null,o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("p",{className:"h3 text-white text-center mb-4"},"Reset Password"))),o.a.createElement(p.q,null,o.a.createElement(p.c,{md:"12"},o.a.createElement(p.h,{label:"Email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong email address format",value:this.state.email,disabled:this.state.emailInputDisabled,onChange:function(a){return e.onChange("email",a.target.value)}}),o.a.createElement("div",{id:"email_err_msg",className:"invalid-feedback"},"Email not found"),o.a.createElement("div",{id:"email_info_msg",className:"valid-feedback"},"OTP has been sent to your email, it is valid for next 10 minutes"))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("div",{className:"text-center"},o.a.createElement(p.b,{onClick:function(){return e.generateOTP()}},"Send OTP Email")))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement(p.h,{label:"Enter OTP (received by email)",icon:"lock",group:!0,onChange:function(a){return e.onChange("otp",a.target.value)}}),o.a.createElement("div",{id:"otp_err_msg",className:"invalid-feedback"},"Required"))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement(p.h,{label:"Type new password",icon:"lock",group:!0,type:"password",onChange:function(a){return e.onChange("password",a.target.value)}}))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement(p.h,{label:"Re-type new password",icon:"lock",group:!0,type:"password",onChange:function(a){return e.onChange("password_re",a.target.value)}}),o.a.createElement("div",{id:"password_re_err_msg",className:"invalid-feedback"},"Passwords do not match"))),o.a.createElement(p.q,null,o.a.createElement(p.c,null,o.a.createElement("div",{className:"text-center"},o.a.createElement(p.b,{onClick:this.initPasswordReset},"Reset Password"))))))))),o.a.createElement(p.b,{outline:!0,color:"success",style:{position:"absolute",top:"0%",right:"0%"},onClick:function(){return e.props.navigate(f.login)}},"Login"))}}]),t}(r.Component),Aa=Object(u.b)((function(e){return{loading:e.loading}}),(function(e){return{checkUserExists:function(a,t){return e(ve(a,t))},generateOTP:function(a,t){return e(function(e,a){return C({url:$+"/"+e,callParams:{method:ue,headers:de,credentials:"include"},cb:a})}(a,t))},passwordReset:function(a,t,n,r){return e(function(e,a,t,n){return C({url:ee,callParams:{method:ge,headers:de,credentials:"include",body:JSON.stringify({email:e,otp:a,password:t})},cb:n})}(a,t,n,r))},navigate:function(a){return e(be(a))}}}))(Ia),Ba=t(66),Da=(t(191),t(192),function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedIn||this.props.onPageLoad()}},{key:"notify",value:function(e,a){switch(e){case Ma:Ba.b.success(a,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0});break;case Sa:Ba.b.error(a,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0});break;default:Ba.b.warn("Invalid notification issue",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0})}}},{key:"render",value:function(){var e="none";return this.props.loading&&(e="block"),this.props.loggedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ba.a,{position:"top-right",autoClose:1e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!1}),o.a.createElement("div",{id:"loader",className:"loader",style:{display:e}}),o.a.createElement("div",{id:"overlay",className:"overlay",style:{display:e}}),o.a.createElement(Ra,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(Ba.a,{position:"top-right",autoClose:1e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!1}),this.props.activeModule===f.login?o.a.createElement(La,{notify:this.notify}):o.a.createElement(o.a.Fragment,null),this.props.activeModule===f.register?o.a.createElement(Fa,{notify:this.notify}):o.a.createElement(o.a.Fragment,null),this.props.activeModule===f.passwordReset?o.a.createElement(Aa,{notify:this.notify}):o.a.createElement(o.a.Fragment,null))}}]),t}(r.Component)),Ta=Object(u.b)((function(e){return{loading:e.loading,loggedIn:e.loggedIn,activeModule:e.activeModule}}),(function(e){return{onPageLoad:function(){return e(C({url:ne,callParams:{method:ue,headers:de,credentials:"include"},onSuccess:F.type,onFailure:F.type}))}}}))(Da);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qa=t(26),Va=t(96),Ga=t.n(Va),za=t(129);function Ha(e,a){0}var Ka=function(e){return function(a){return function(){var t=Object(za.a)(Ga.a.mark((function t(n){var r,o,i,s,l,c,m;return Ga.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.dispatch,Ha("action",n),n.type===C.type){t.next=4;break}return t.abrupt("return",a(n));case 4:o=n.payload,i=o.onSuccess,s=o.onFailure,l=o.url,c=o.callParams,m=o.cb,Ha("url",n.payload.url),fetch(l,Object(h.a)({},c)).then((function(e){return e.json()})).then((function(e){Ha("response",e),m&&"function"===typeof m&&m(e),i&&r({type:i,payload:e})})).catch((function(e){Ha("error",e),s&&r({type:s,payload:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Ja=Object(v.a)({reducer:Y,middleware:[].concat(Object(qa.a)(Object(v.d)()),[Ka])}),Wa=(t(194),t(195),t(196),t(130)),Za=t(28);s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(u.a,{store:Ja},o.a.createElement(Za.a,{utils:Wa.a},o.a.createElement(Ta,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[155,1,2]]]);
//# sourceMappingURL=main.03807b02.chunk.js.map